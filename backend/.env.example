# ═══════════════════════════════════════════════════════════════════════════
# CLAUDE FLYWHEEL BACKEND - ENVIRONMENT VARIABLES
# Copy this file to .env and fill in your values
# ═══════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# SERVER CONFIGURATION
# ─────────────────────────────────────────────────────────────────────────────
PORT=3000

# ─────────────────────────────────────────────────────────────────────────────
# SOLANA CONFIGURATION
# ─────────────────────────────────────────────────────────────────────────────
# Your Solana RPC endpoint (Helius, QuickNode, or other provider recommended)
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com

# Token mint address for single-token flywheel mode
# Set to actual mint after token launch, or leave as placeholder for multi-user mode
TOKEN_MINT_ADDRESS=PLACEHOLDER_UPDATE_AFTER_TOKEN_LAUNCH

# ─────────────────────────────────────────────────────────────────────────────
# WALLET CONFIGURATION (Single-Token Mode)
# ─────────────────────────────────────────────────────────────────────────────
# Dev wallet private key (Base58 encoded) - receives fees from Bags.fm
DEV_WALLET_PRIVATE_KEY=

# Ops wallet private key (Base58 encoded) - performs market making trades
OPS_WALLET_PRIVATE_KEY=

# ─────────────────────────────────────────────────────────────────────────────
# SUPABASE CONFIGURATION
# ─────────────────────────────────────────────────────────────────────────────
# Your Supabase project URL
SUPABASE_URL=https://your-project.supabase.co

# Supabase service role key (NOT anon key - needed for RLS bypass)
# NOTE: The code uses SUPABASE_SERVICE_KEY (not SUPABASE_SERVICE_ROLE_KEY)
SUPABASE_SERVICE_KEY=

# ─────────────────────────────────────────────────────────────────────────────
# ENCRYPTION (Required for Multi-User Mode)
# ─────────────────────────────────────────────────────────────────────────────
# 32-byte hex string for AES-256-GCM encryption of user private keys
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_MASTER_KEY=

# ─────────────────────────────────────────────────────────────────────────────
# BAGS.FM API
# ─────────────────────────────────────────────────────────────────────────────
# API key from Bags.fm (required for claiming fees)
BAGS_FM_API_KEY=

# ─────────────────────────────────────────────────────────────────────────────
# TELEGRAM BOT
# ─────────────────────────────────────────────────────────────────────────────
# Bot token from @BotFather
TELEGRAM_BOT_TOKEN=

# Webhook URL for production (optional - uses polling if not set)
TELEGRAM_WEBHOOK_URL=

# Webhook secret for verification (optional but recommended for production)
TELEGRAM_WEBHOOK_SECRET=

# ─────────────────────────────────────────────────────────────────────────────
# PLATFORM FEE CONFIGURATION
# ─────────────────────────────────────────────────────────────────────────────
# Platform wallet to receive 10% of claimed fees
PLATFORM_FEE_WALLET=

# Platform fee percentage (default: 10 = 10%)
PLATFORM_FEE_PERCENTAGE=10

# ─────────────────────────────────────────────────────────────────────────────
# FLYWHEEL CONFIGURATION
# ─────────────────────────────────────────────────────────────────────────────
# Fee collection interval in milliseconds (default: 300000 = 5 minutes)
FEE_COLLECTION_INTERVAL_MS=300000

# Minimum fee threshold in SOL before claiming (default: 0.001)
MIN_FEE_THRESHOLD_SOL=0.001

# Enable/disable market making (default: true)
MARKET_MAKING_ENABLED=true

# ─────────────────────────────────────────────────────────────────────────────
# JOB CONFIGURATION
# ─────────────────────────────────────────────────────────────────────────────
# Fast claim job - claims fees every 30 seconds when >= 0.15 SOL available
FAST_CLAIM_JOB_ENABLED=true
FAST_CLAIM_INTERVAL_MS=30000
FAST_CLAIM_THRESHOLD_SOL=0.15

# Legacy claim job - hourly claiming (disabled by default if fast claim enabled)
CLAIM_JOB_ENABLED=false
CLAIM_JOB_INTERVAL_MS=3600000

# Multi-user flywheel job - runs market making for all user tokens
MULTI_USER_FLYWHEEL_ENABLED=true
MULTI_USER_FLYWHEEL_INTERVAL_MS=60000

# Deposit monitor job - monitors pending token launches for deposits
DEPOSIT_MONITOR_ENABLED=true
DEPOSIT_MONITOR_INTERVAL_MS=30000
DEPOSIT_EXPIRY_HOURS=24

# Balance update job - updates cached wallet balances
BALANCE_UPDATE_JOB_ENABLED=true
BALANCE_UPDATE_INTERVAL_MS=300000

# ─────────────────────────────────────────────────────────────────────────────
# WHEEL TOKEN FLYWHEEL (Platform Token)
# ─────────────────────────────────────────────────────────────────────────────
# Enable/disable WHEEL token flywheel (uses DEV_WALLET and OPS_WALLET keys above)
WHEEL_FLYWHEEL_ENABLED=true

# Flywheel trading interval in minutes (default: 1)
WHEEL_FLYWHEEL_INTERVAL_MINUTES=1

# Claim check interval in seconds (default: 30)
WHEEL_CLAIM_INTERVAL_SECONDS=30

# Minimum claimable SOL to trigger a claim (default: 0.05)
WHEEL_CLAIM_THRESHOLD_SOL=0.05

# Trading size bounds in SOL
WHEEL_MIN_BUY_SOL=0.02
WHEEL_MAX_BUY_SOL=0.1

# Slippage tolerance in basis points (default: 300 = 3%)
WHEEL_SLIPPAGE_BPS=300

# ─────────────────────────────────────────────────────────────────────────────
# LOGGING & DEBUG
# ─────────────────────────────────────────────────────────────────────────────
# Set to 'development' for verbose logging
NODE_ENV=production

# Enable debug logging for specific modules (comma-separated)
# DEBUG=flywheel:*,telegram:*
